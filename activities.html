<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Activities – STRATOS TG3: Initial Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-44d8862ff5335838008e1d1029e4056f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./activities.html">Activities</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/stratos-color-transpbackgr.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
    <a href="https://github.com/stratosida/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Initial Data Analysis TEST TEST</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./members.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Members</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./papers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./activities.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Activities</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R implementations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ida-glossary" id="toc-ida-glossary" class="nav-link active" data-scroll-target="#ida-glossary">IDA glossary</a>
  <ul class="collapse">
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description"><strong>Project description</strong></a></li>
  <li><a href="#project-outcomes" id="toc-project-outcomes" class="nav-link" data-scroll-target="#project-outcomes"><strong>Project outcomes:</strong></a></li>
  </ul></li>
  <li><a href="#incorporating-ida-in-courses-on-statistics" id="toc-incorporating-ida-in-courses-on-statistics" class="nav-link" data-scroll-target="#incorporating-ida-in-courses-on-statistics">Incorporating IDA in courses on statistics</a>
  <ul class="collapse">
  <li><a href="#project-description-1" id="toc-project-description-1" class="nav-link" data-scroll-target="#project-description-1"><strong>Project description</strong></a></li>
  <li><a href="#project-outcomes-1" id="toc-project-outcomes-1" class="nav-link" data-scroll-target="#project-outcomes-1"><strong>Project outcomes:</strong></a></li>
  </ul></li>
  <li><a href="#ida-for-regression-models" id="toc-ida-for-regression-models" class="nav-link" data-scroll-target="#ida-for-regression-models">IDA for regression models</a>
  <ul class="collapse">
  <li><a href="#project-description-2" id="toc-project-description-2" class="nav-link" data-scroll-target="#project-description-2"><strong>Project description</strong></a></li>
  <li><a href="#project-outcomes-2" id="toc-project-outcomes-2" class="nav-link" data-scroll-target="#project-outcomes-2"><strong>Project outcomes:</strong></a></li>
  </ul></li>
  <li><a href="#ida-for-longitudinal-data" id="toc-ida-for-longitudinal-data" class="nav-link" data-scroll-target="#ida-for-longitudinal-data">IDA for longitudinal data</a>
  <ul class="collapse">
  <li><a href="#project-description-3" id="toc-project-description-3" class="nav-link" data-scroll-target="#project-description-3"><strong>Project description</strong></a></li>
  <li><a href="#project-outcomes-3" id="toc-project-outcomes-3" class="nav-link" data-scroll-target="#project-outcomes-3"><strong>Project outcomes:</strong></a></li>
  <li><a href="#supplementary-material" id="toc-supplementary-material" class="nav-link" data-scroll-target="#supplementary-material"><strong>Supplementary material</strong></a></li>
  </ul></li>
  <li><a href="#systematic-review-of-ida-reporting" id="toc-systematic-review-of-ida-reporting" class="nav-link" data-scroll-target="#systematic-review-of-ida-reporting">Systematic review of IDA reporting</a>
  <ul class="collapse">
  <li><a href="#project-description-4" id="toc-project-description-4" class="nav-link" data-scroll-target="#project-description-4"><strong>Project description</strong></a></li>
  <li><a href="#project-outcomes-4" id="toc-project-outcomes-4" class="nav-link" data-scroll-target="#project-outcomes-4"><strong>Project outcomes</strong></a></li>
  <li><a href="#supplementary-material-1" id="toc-supplementary-material-1" class="nav-link" data-scroll-target="#supplementary-material-1"><strong>Supplementary material</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Activities</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="ida-glossary" class="level2">
<h2 class="anchored" data-anchor-id="ida-glossary">IDA glossary</h2>
<section id="project-description" class="level3">
<h3 class="anchored" data-anchor-id="project-description"><strong>Project description</strong></h3>
<p>The objective is to provide definitions of common terms used by the Initial Data Analysis topics group. Every effort will be made to use existing opne access definitions.</p>
<p>Authors: All TG3 members</p>
<p>Project status: <strong>NEW</strong></p>
</section>
<section id="project-outcomes" class="level3">
<h3 class="anchored" data-anchor-id="project-outcomes"><strong>Project outcomes:</strong></h3>
<p>Glossary of 10-15 terms with definitions, e.g IDA, EDA, data cleaningm data screening, data quality,</p>
</section>
</section>
<section id="incorporating-ida-in-courses-on-statistics" class="level2">
<h2 class="anchored" data-anchor-id="incorporating-ida-in-courses-on-statistics">Incorporating IDA in courses on statistics</h2>
<section id="project-description-1" class="level3">
<h3 class="anchored" data-anchor-id="project-description-1"><strong>Project description</strong></h3>
<p>The objective is to provide an engaging application from itial data analysis to regression models using characters from the Pokémon franchise to address the research question aimed at evaluating the association between Pokémon species weight and other characteristics.</p>
<p>This example provides flexibility for instructors (courses, workshops, seminars, modules) to integrate into their teaching materials or assignments. Depending on the type of classes, the instructor can emphasize different aspects, for example data descriptions, learning which explorations are meaningful and how to interpret the results, univariable or multivariable regression modeling strategies, learning coding in R, or rigor and reproducibility in planning and executing studies.</p>
<p>Lead: Lara Lusa</p>
<p>Project status: <strong>ACTIVE</strong></p>
</section>
<section id="project-outcomes-1" class="level3">
<h3 class="anchored" data-anchor-id="project-outcomes-1"><strong>Project outcomes:</strong></h3>
<p>1.&nbsp;Manuscript for a journal with a “Teaching corner”</p>
<p>2.&nbsp;Curated Pokemon data set for open access</p>
<p>3.&nbsp;R code for initial data analysis and for regression models</p>
<p>4.&nbsp;Statistical analysis plan for this example</p>
<p>5.&nbsp;Diskussion questions or tasks for the students</p>
</section>
</section>
<section id="ida-for-regression-models" class="level2">
<h2 class="anchored" data-anchor-id="ida-for-regression-models">IDA for regression models</h2>
<section id="project-description-2" class="level3">
<h3 class="anchored" data-anchor-id="project-description-2"><strong>Project description</strong></h3>
<p>The objective is to provide examples on conducting initial data analysis (IDA) in a reproducible manner in the context of intended regression analyses.</p>
<p>Authors: Georg Heinze, Mark Baillie, Lara Lusa, Carsten O Schmidt, Willi Sauerbrei, Frank E Harrell, Marianne Huebner</p>
<p>This is a joint project between the Topic Groups 2 and 3 of the STRATOS Initiative.</p>
<p>Project status: <strong>CLOSED, paper published</strong></p>
</section>
<section id="project-outcomes-2" class="level3">
<h3 class="anchored" data-anchor-id="project-outcomes-2"><strong>Project outcomes:</strong></h3>
<p>1.&nbsp; Open access dataset: <a href="https://zenodo.org/records/7554815">bacteremia</a></p>
<p>2.&nbsp; <a href="https://stratosida.github.io/regression-regrets/">IDA report with R code</a></p>
<p>3.&nbsp; IDA plan (check list) for the example(s) (in the paper)</p>
<p>4.&nbsp; <a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/s12874-024-02294-3">Paper</a> with scope of regression model, results, and consequences of IDA for regression:</p>
<p>Heinze G, Baillie M, Lusa L, Sauerbrei W, Schmidt CO, Harrell FE, Huebner M; TG2 and TG3 of the STRATOS initiative. Regression without regrets -initial data analysis is a prerequisite for multivariable regression. BMC Med Res Methodol. 2024 Aug 8;24(1):178. <a href="https://doi.org/10.1186/s12874-024-02294-3">doi: 10.1186/s12874-024-02294-3</a></p>
</section>
</section>
<section id="ida-for-longitudinal-data" class="level2">
<h2 class="anchored" data-anchor-id="ida-for-longitudinal-data">IDA for longitudinal data</h2>
<section id="project-description-3" class="level3">
<h3 class="anchored" data-anchor-id="project-description-3"><strong>Project description</strong></h3>
<p>The objective is to provide an example of initial data anlysis for longitudinal data.</p>
<p>Authors: Lara Lusa, Cecile Proust-Lima, Katherine Lee, Frank Lawrence, Carsten Schmidt, Mark Baillie, Saskia le Cessie, Marianne Huebner</p>
<p>Project status: <strong>CLOSED, paper published</strong></p>
</section>
<section id="project-outcomes-3" class="level3">
<h3 class="anchored" data-anchor-id="project-outcomes-3"><strong>Project outcomes:</strong></h3>
<p>1.&nbsp; IDA plan <a href="assets/IDAchecklist_long.pdf">check list</a></p>
<p>2.&nbsp; <a href="https://stratosida.github.io/longitudinal/">IDA report with R code</a></p>
<p>3.&nbsp; Manuscript with IDA workflow in the example of the SHARE data:</p>
<p>Lusa L, Proust-Lima C, Schmidt CO, Lee KJ, le Cessie S, Baillie M, Lawrence F, Huebner M; TG3 of the STRATOS Initiative. Initial data analysis for longitudinal studies to build a solid foundation for reproducible analysis. PLoS One. 2024 May 29;19(5):e0295726. <a href="https://doi.org/10.1371/journal.pone.0295726">doi: 10.1371/journal.pone.0295726</a></p>
</section>
<section id="supplementary-material" class="level3">
<h3 class="anchored" data-anchor-id="supplementary-material"><strong>Supplementary material</strong></h3>
<p>The Survey of Health Ageing and Retirement in Europe (SHARE) consists of data on health and socioeconomic variables of non-institutionalized individuals aged 50 and older across several European countries. The data sets includes about 140 000 men and women, ages 50 or older, collected in years 2004 to 2018. The questionnaires include questions on demographics, health (physical, and mental health, cognitive function, grip strength and behavioral risks), and socio-economic status. <a href="https://share-eric.eu" class="uri">https://share-eric.eu</a></p>
<p><strong>Open Science Framework: R code</strong></p>
<p>Lusa L, Huebner M. (2021, September 17). Repository with R vignettes to support data organization and analysis for the SHARE study. <a href="https://doi.org/10.17605/OSF.IO/KGTX6" class="uri">https://doi.org/10.17605/OSF.IO/KGTX6</a></p>
</section>
</section>
<section id="systematic-review-of-ida-reporting" class="level2">
<h2 class="anchored" data-anchor-id="systematic-review-of-ida-reporting">Systematic review of IDA reporting</h2>
<section id="project-description-4" class="level3">
<h3 class="anchored" data-anchor-id="project-description-4"><strong>Project description</strong></h3>
<p>Our aim was to describe the practice of reporting of initial data analyses in observational studies in five highly ranked medical journals with focus on data cleaning, screening, and reporting of findings which led to a potential change in the analysis plan.</p>
<p>Authors: Marianne Huebner, Werner Vach, Saskia le Cessie, Carsten Oliver Schmidt, Lara Lusa</p>
<p>Project status: <strong>CLOSED, paper published</strong></p>
</section>
<section id="project-outcomes-4" class="level3">
<h3 class="anchored" data-anchor-id="project-outcomes-4"><strong>Project outcomes</strong></h3>
<p>1. Summary of current IDA reporting by location in papers with examples.</p>
<p>2. Recommendations for reporting practice of IDA in papers</p>
<p>3. Manuscript:</p>
<p>Hidden analyses: a review of reporting practice and recommendations for more transparent reporting of initial data analyses</p>
<p>BMC Med Res Meth (2020) 20:61. <a href="https://doi.org/10.1186/s12874-020-00942-y" class="uri">https://doi.org/10.1186/s12874-020-00942-y</a></p>
</section>
<section id="supplementary-material-1" class="level3">
<h3 class="anchored" data-anchor-id="supplementary-material-1"><strong>Supplementary material</strong></h3>
<p>In the <a href="https://github.com/stratosida/stratosida.github.io/tree/main/assets/">assets</a> folder</p>
<p>1. Study protocol for IDA literature review: <a href="assets/Protocol_IDA20180620.pdf">Protocol_IDA20180620.pdf</a></p>
<p>2. Design of IDA collection form: <a href="assets/Collection_Form_20181129.pdf">Collection_Form_20181129.pdf</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/stratosida\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>